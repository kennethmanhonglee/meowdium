extends layout 
include utils.pug

block content 
  div(class='user-bio')
    div(class='user-name')= userName
    div(class='user-email')= email
  div(class='pawst-body')
    div(class='title')= post.title
    if (post.subtitle)
      div(class='subtitle')= post.subtitle
    div(class='post-info')
      div(class='author')= userName
      div(class='date')= post.updatedAt
      if (locals.user && locals.user.id === post.userId )
        div(class='function-btns')
          form(action=`/pawsts/${post.id}/edit` method="get")
            button(type="submit") Edit 
          form(action=`/pawsts/${post.id}/delete` method="post")
            button(type="submit") Delete
    div(class="content")= post.content
    div(class="pawst-content-footer")
      div(class="author")
      div(class="likes-stats")
        div(class="like-icon")
        div(class="like-count")
      div(class="pawments-stats")
        div(class="pawment-icon")
        div(class="pawment-count")
      div(id="pawments-container")
        if locals.authenticated
          div(class='new-pawment-box')
            form(action=`/pawsts/${post.id}/pawments` method='post')
              //- input(type='hidden' name='_csrf' value=csrfToken)
              +field('content', content, 'textarea', 'Pawment')
              div(class='')
                button(id='comment-submit' type='submit' class='btn btn-primary') Submit
        each pawment in pawments
          div(class="pawment")
            div(class="pawmenter-info")
              div(class="commenter-name")= userName
              div(class="pawment-date")= pawment.updatedAt.toDateString()
            div(class="pawment-content")= pawment.content
            if locals.authenticated
              div(class="pawment-buttons")
                form(action=`/pawments/${pawment.id}/edit` method="post")
                  button(type="submit") Edit 
                form(action=`/pawments/${pawment.id}/delete` method="post")
                  button(type="submit") Delete
          hr